
# ◆◆◆　#parameter　◆◆◆

PIPELINE_MAIN_CLASS=com.example.MyPipelineMainClass  # main class of pipeline code
PROJECT=""    # Google cloud project ID
BUCKET=""     # GCS Bucket name


# ◆◆◆　#pipeline　◆◆◆

# List Pipeline Options:
mvn exec:java -Dexec.mainClass=$PIPELINE_MAIN_CLASS -Dexec.args="--help"

# View Pipeline Options:
mvn exec:java -Dexec.mainClass=$PIPELINE_MAIN_CLASS -Dexec.args="--help=RunOptions"

# Apply Pipeline Options


# ◆◆◆　#quickstart　◆◆◆

# download sample code
mvn archetype:generate \
      -DarchetypeGroupId=org.apache.beam \
      -DarchetypeArtifactId=beam-sdks-java-maven-archetypes-examples \
      -DarchetypeVersion=2.28.0 \
      -DgroupId=com.example \
      -DartifactId=apache-beam-examples \
      -Dpackage=org.apache.beam.examples \
      -Dversion="0.1" \
      -DinteractiveMode=false

# Execute word count example locally
cd apache-beam-examples
mvn -Pdirect-runner compile exec:java \
      -Dexec.mainClass=org.apache.beam.examples.WordCount \
      -Dexec.args="--output=/tmp/wordcount-output"

# View output
ls /tmp/wordcount-output-00*
head /tmp/wordcount-output-00000-of-00005

# Execute word count example with Google Cloud Dataflow service
mvn -Pdataflow-runner compile exec:java \
      -Dexec.mainClass=org.apache.beam.examples.WordCount \
      -Dexec.args="--project=$PROJECT \
      --stagingLocation=gs://$BUCKET/staging/ \
      --gcpTempLocation=gs://$BUCKET/tmp/ \
      --output=gs://$BUCKET/output/wordcount \
      --runner=DataflowRunner"

# View Output
gsutil ls -l gs://$BUCKET/output/wordcount*


      
